<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit Claim - ClaimChain</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .step-indicator {
            transition: all 0.3s ease;
        }
        
        .step-content {
            display: none;
        }
        
        .step-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        .progress-bar {
            transition: width 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Drag and drop styles */
        .drag-over {
            border-color: #3B82F6;
            background-color: #EFF6FF;
        }

        /* File preview grid */
        .file-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gradient-to-b from-gray-50 to-gray-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <a href="index.html" class="flex items-center">
                    <span class="text-2xl font-bold text-blue-600">ClaimChain</span>
                </a>
                <div class="text-sm text-gray-600">
                    Need help? Call 1-800-CLAIM
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Progress Bar -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <div class="flex justify-between mb-4">
                <span class="text-sm font-medium" id="progress-text">Step 1 of 4</span>
                <span class="text-sm text-gray-500" id="time-estimate">Est. time: 10-15 mins</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div class="progress-bar bg-blue-600 h-2 rounded-full" style="width: 25%"></div>
            </div>
        </div>

        <!-- Step Indicators -->
        <div class="flex justify-between mb-8">
            <div class="step-indicator flex-1 text-center">
                <div class="w-8 h-8 bg-blue-600 text-white rounded-full mx-auto flex items-center justify-center mb-2">1</div>
                <span class="text-sm">Basic Info</span>
            </div>
            <div class="step-indicator flex-1 text-center">
                <div class="w-8 h-8 bg-gray-300 text-gray-600 rounded-full mx-auto flex items-center justify-center mb-2">2</div>
                <span class="text-sm">Damage Details</span>
            </div>
            <div class="step-indicator flex-1 text-center">
                <div class="w-8 h-8 bg-gray-300 text-gray-600 rounded-full mx-auto flex items-center justify-center mb-2">3</div>
                <span class="text-sm">Documentation</span>
            </div>
            <div class="step-indicator flex-1 text-center">
                <div class="w-8 h-8 bg-gray-300 text-gray-600 rounded-full mx-auto flex items-center justify-center mb-2">4</div>
                <span class="text-sm">Review</span>
            </div>
        </div>

        <!-- Form Steps Container -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <!-- Step 1: Basic Info -->
            <div class="step-content active" id="step1">
                <h2 class="text-xl font-bold mb-6">Basic Information</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Property Type</label>
                        <select id="propertyType" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2">
                            <option value="">Select property type...</option>
                            <option value="residential">Residential</option>
                            <option value="commercial">Commercial</option>
                            <option value="industrial">Industrial</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">Property Location</label>
                        <input type="text" id="location" placeholder="Street Address" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2">
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">City</label>
                            <input type="text" id="city" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">State</label>
                            <input type="text" id="state" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">When did you discover the damage?</label>
                        <input type="date" id="discoveryDate" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2">
                    </div>

                    <div class="bg-blue-50 p-4 rounded-lg">
                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <svg class="h-5 w-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <div class="ml-3">
                                <h3 class="text-sm font-medium text-blue-800">How Our Process Is Different</h3>
                                <p class="text-sm text-blue-700 mt-1">
                                    Your claim details are immediately recorded and can't be altered. This creates a permanent, transparent record that protects your interests.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="mt-8 flex justify-between">
                <button onclick="prevStep()" class="bg-gray-200 text-gray-600 px-6 py-2 rounded-lg hover:bg-gray-300 transition-colors hidden" id="prevButton">
                    Previous
                </button>
                <button onclick="nextStep()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors ml-auto" id="nextButton">
                    Continue
                </button>
            </div>
        </div>

        <!-- Information Panel -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h3 class="text-lg font-semibold mb-4">What Happens Next?</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center">1</div>
                    </div>
                    <div class="ml-4">
                        <h4 class="text-sm font-medium">Multiple Reviews</h4>
                        <p class="text-sm text-gray-500">Your claim is reviewed by 3+ independent adjusters</p>
                    </div>
                </div>
                
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center">2</div>
                    </div>
                    <div class="ml-4">
                        <h4 class="text-sm font-medium">Weather Verification</h4>
                        <p class="text-sm text-gray-500">Automated weather data confirmation</p>
                    </div>
                </div>
                
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center">3</div>
                    </div>
                    <div class="ml-4">
                        <h4 class="text-sm font-medium">Fair Settlement</h4>
                        <p class="text-sm text-gray-500">Transparent process with no hidden decisions</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 4;
        
        // Step content templates
        const stepTemplates = {
            step2: `
                <h2 class="text-xl font-bold mb-6">Damage Details</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Type of Damage</label>
                        <select id="damageType" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2" multiple>
                            <option value="roof">Roof Damage</option>
                            <option value="water">Water Damage</option>
                            <option value="structural">Structural Damage</option>
                            <option value="wind">Wind Damage</option>
                            <option value="hail">Hail Damage</option>
                        </select>
                        <p class="text-sm text-gray-500 mt-1">Hold Ctrl/Cmd to select multiple</p>
                    </div>
    
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Damage Description</label>
                        <textarea id="damageDescription" rows="4" 
                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2"
                                placeholder="Describe the visible damage..."></textarea>
                    </div>
    
                    <div>
                        <label class="block text-sm font-medium text-gray-700">When did the damage occur? (if different from discovery date)</label>
                        <input type="date" id="damageDate" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2">
                    </div>
    
                    <div class="bg-yellow-50 p-4 rounded-lg">
                        <h3 class="text-sm font-medium text-yellow-800">Weather Data Verification</h3>
                        <p class="text-sm text-yellow-600 mt-1">
                            We'll automatically verify weather conditions for your location and date.
                            This helps establish causation and strengthens your claim.
                        </p>
                    </div>
                </div>
            `,
            step3: `
                <h2 class="text-xl font-bold mb-6">Documentation</h2>
                <div class="space-y-4">
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                        <div class="space-y-2">
                            <div class="text-gray-600">
                                <svg class="mx-auto h-12 w-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                                          d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3 3m0 0l-3-3m3 3v-12"/>
                                </svg>
                                <p class="mt-1">Drag and drop photos here</p>
                                <p class="text-sm text-gray-500">or click to select files</p>
                            </div>
                            <input type="file" multiple accept="image/*" class="hidden" id="photoUpload">
                            <button onclick="document.getElementById('photoUpload').click()" 
                                    class="mt-2 px-4 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50">
                                Select Files
                            </button>
                        </div>
                    </div>
    
                    <div id="uploadedFiles" class="grid grid-cols-2 gap-4">
                        <!-- Uploaded files will appear here -->
                    </div>
    
                    <div class="bg-green-50 p-4 rounded-lg mt-4">
                        <h3 class="text-sm font-medium text-green-800">Documentation Security</h3>
                        <p class="text-sm text-green-600 mt-1">
                            All uploaded documentation is timestamped and stored securely. 
                            Once uploaded, files cannot be altered or deleted, ensuring a permanent record.
                        </p>
                    </div>
                </div>
            `,
            step4: `
                <h2 class="text-xl font-bold mb-6">Review Your Claim</h2>
                <div class="space-y-6">
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-medium mb-2">Property Information</h3>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="text-gray-600">Property Type:</span>
                                <span class="ml-2" id="review-propertyType"></span>
                            </div>
                            <div>
                                <span class="text-gray-600">Location:</span>
                                <span class="ml-2" id="review-location"></span>
                            </div>
                        </div>
                    </div>
    
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-medium mb-2">Damage Information</h3>
                        <div class="space-y-2 text-sm">
                            <div>
                                <span class="text-gray-600">Type of Damage:</span>
                                <span class="ml-2" id="review-damageType"></span>
                            </div>
                            <div>
                                <span class="text-gray-600">Description:</span>
                                <p class="mt-1" id="review-description"></p>
                            </div>
                        </div>
                    </div>
    
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-medium mb-2">Documentation</h3>
                        <div id="review-docs" class="grid grid-cols-4 gap-4">
                            <!-- Document thumbnails will appear here -->
                        </div>
                    </div>
    
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="text-sm font-medium text-blue-800">Next Steps</h3>
                        <ul class="list-disc list-inside text-sm text-blue-600 mt-2 space-y-1">
                            <li>Your claim will be reviewed by multiple independent adjusters</li>
                            <li>Weather data will be automatically verified</li>
                            <li>You'll receive updates at each step of the process</li>
                            <li>Track your claim status in real-time on your dashboard</li>
                        </ul>
                    </div>
                </div>
            `
        };
    
        // Handle file uploads
        let uploadedFiles = [];
        document.getElementById('photoUpload')?.addEventListener('change', function(e) {
            const files = e.target.files;
            for (let file of files) {
                uploadedFiles.push(file);
                displayUploadedFile(file);
            }
        });
    
        function displayUploadedFile(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const div = document.createElement('div');
                div.className = 'relative';
                div.innerHTML = `
                    <img src="${e.target.result}" class="w-full h-32 object-cover rounded-lg">
                    <div class="absolute top-0 right-0 mt-2 mr-2">
                        <button class="bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center"
                                onclick="removeFile('${file.name}')">×</button>
                    </div>
                `;
                document.getElementById('uploadedFiles').appendChild(div);
            };
            reader.readAsDataURL(file);
        }
    
        function removeFile(fileName) {
            uploadedFiles = uploadedFiles.filter(file => file.name !== fileName);
            updateUploadedFilesDisplay();
        }
    
        function updateUploadedFilesDisplay() {
            const container = document.getElementById('uploadedFiles');
            container.innerHTML = '';
            uploadedFiles.forEach(file => displayUploadedFile(file));
        }
    
        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.querySelector('.progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = `Step ${currentStep} of ${totalSteps}`;
            
            // Update step indicators
            document.querySelectorAll('.step-indicator').forEach((indicator, index) => {
                const circle = indicator.querySelector('div');
                if (index + 1 < currentStep) {
                    circle.classList.remove('bg-gray-300', 'text-gray-600');
                    circle.classList.add('bg-green-500', 'text-white');
                } else if (index + 1 === currentStep) {
                    circle.classList.remove('bg-gray-300', 'text-gray-600');
                    circle.classList.add('bg-blue-600', 'text-white');
                } else {
                    circle.classList.remove('bg-blue-600', 'bg-green-500', 'text-white');
                    circle.classList.add('bg-gray-300', 'text-gray-600');
                }
            });
        }
    
        function validateStep() {
            switch(currentStep) {
                case 1:
                    return document.getElementById('propertyType').value && 
                           document.getElementById('location').value &&
                           document.getElementById('city').value &&
                           document.getElementById('state').value &&
                           document.getElementById('discoveryDate').value;
                case 2:
                    return document.getElementById('damageType').value &&
                           document.getElementById('damageDescription').value;
                case 3:
                    return uploadedFiles.length > 0;
                case 4:
                    return true;
                default:
                    return false;
            }
        }
    
        function nextStep() {
            if (!validateStep()) {
                alert('Please fill in all required fields before continuing.');
                return;
            }
    
            if (currentStep < totalSteps) {
                // Hide current step
                document.getElementById(`step${currentStep}`).classList.remove('active');
                
                currentStep++;
                
                // Create next step if it doesn't exist
                let nextStepElement = document.getElementById(`step${currentStep}`);
                if (!nextStepElement) {
                    nextStepElement = document.createElement('div');
                    nextStepElement.id = `step${currentStep}`;
                    nextStepElement.className = 'step-content';
                    nextStepElement.innerHTML = stepTemplates[`step${currentStep}`];
                    document.querySelector('.step-content').parentNode.appendChild(nextStepElement);
                }
                
                // Show next step
                nextStepElement.classList.add('active');
                document.getElementById('prevButton').classList.remove('hidden');
                
                if (currentStep === totalSteps) {
                    const nextButton = document.getElementById('nextButton');
                    nextButton.textContent = 'Submit Claim';
                    nextButton.onclick = submitClaim;
                    populateReview();
                }
            }
            
            updateProgress();
        }
    
        function prevStep() {
            if (currentStep > 1) {
                // Hide current step
                document.getElementById(`step${currentStep}`).classList.remove('active');
                
                currentStep--;
                
                // Show previous step
                document.getElementById(`step${currentStep}`).classList.add('active');
                
                if (currentStep === 1) {
                    document.getElementById('prevButton').classList.add('hidden');
                }
                
                const nextButton = document.getElementById('nextButton');
                nextButton.textContent = 'Continue';
                nextButton.onclick = nextStep;
            }
            
            updateProgress();
        }
    
        function populateReview() {
            document.getElementById('review-propertyType').textContent = document.getElementById('propertyType').value;
            document.getElementById('review-location').textContent = `${document.getElementById('city').value}, ${document.getElementById('state').value}`;
            document.getElementById('review-damageType').textContent = Array.from(document.getElementById('damageType').selectedOptions).map(opt => opt.text).join(', ');
            document.getElementById('review-description').textContent = document.getElementById('damageDescription').value;
            
            // Display document thumbnails
            const docsContainer = document.getElementById('review-docs');
            docsContainer.innerHTML = '';
            uploadedFiles.forEach(file => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const div = document.createElement('div');
                    div.innerHTML = `<img src="${e.target.result}" class="w-full h-24 object-cover rounded-lg">`;
                    docsContainer.appendChild(div);
                };
                reader.readAsDataURL(file);
            });
        }
    
        function submitClaim() {
            // Here we would normally send the data to the server
            // For demo purposes, we'll simulate a submission
            const nextButton = document.getElementById('nextButton');
            nextButton.disabled = true;
            nextButton.textContent = 'Submitting...';
            
            setTimeout(() => {
                window.location.href = 'claim-tracking.html?id=' + Math.random().toString(36).substr(2, 9);
            }, 2000);
        }
    
        // Initialize
        document.addEventListener('DOMContentLoaded', updateProgress);
    </script>
</body>
</html>
